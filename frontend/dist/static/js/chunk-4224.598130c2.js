(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4224"],{"0jNN":function(e,t,r){"use strict";var o=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)void 0!==e[o]&&(r[o]=e[o]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],n=Object.keys(a),l=0;l<n.length;++l){var s=n[l],c=a[s];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:a,prop:s}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var o=[],i=0;i<t.length;++i)void 0!==t[i]&&o.push(t[i]);r.obj[r.prop]=o}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",o=0;o<t.length;++o){var a=t.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=t.charAt(o):a<128?r+=i[a]:a<2048?r+=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?r+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(o)),r+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return r},isBuffer:function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(i.plainObjects||i.allowPrototypes||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var n=t;return Array.isArray(t)&&!Array.isArray(r)&&(n=a(t,i)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,a){o.call(t,a)?t[a]&&"object"==typeof t[a]?t[a]=e(t[a],r,i):t.push(r):t[a]=r}),t):Object.keys(r).reduce(function(t,a){var n=r[a];return o.call(t,a)?t[a]=e(t[a],n,i):t[a]=n,t},n)}}},"6NYe":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var o=r("FyfS"),i=r.n(o);function a(e,t){if(t.length>0){var r=!0,o=!1,a=void 0;try{for(var n,l=i()(t);!(r=(n=l.next()).done);r=!0){if(e==n.value)return!0}}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}}return!1}},QSc6:function(e,t,r){"use strict";var o=r("0jNN"),i=r("sxOR"),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,serializeDate:function(e){return n.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,r,i,a,n,s,c,f,u,p,d,m){var y=t;if("function"==typeof c)y=c(r,y);else if(y instanceof Date)y=p(y);else if(null===y){if(a)return s&&!m?s(r,l.encoder):r;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||o.isBuffer(y))return s?[d(m?r:s(r,l.encoder))+"="+d(s(y,l.encoder))]:[d(r)+"="+d(String(y))];var v,b=[];if(void 0===y)return b;if(Array.isArray(c))v=c;else{var h=Object.keys(y);v=f?h.sort(f):h}for(var g=0;g<v.length;++g){var x=v[g];n&&null===y[x]||(b=Array.isArray(y)?b.concat(e(y[x],i(r,x),i,a,n,s,c,f,u,p,d,m)):b.concat(e(y[x],r+(u?"."+x:"["+x+"]"),i,a,n,s,c,f,u,p,d,m)))}return b};e.exports=function(e,t){var r=e,n=t?o.assign({},t):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===n.delimiter?l.delimiter:n.delimiter,f="boolean"==typeof n.strictNullHandling?n.strictNullHandling:l.strictNullHandling,u="boolean"==typeof n.skipNulls?n.skipNulls:l.skipNulls,p="boolean"==typeof n.encode?n.encode:l.encode,d="function"==typeof n.encoder?n.encoder:l.encoder,m="function"==typeof n.sort?n.sort:null,y=void 0!==n.allowDots&&n.allowDots,v="function"==typeof n.serializeDate?n.serializeDate:l.serializeDate,b="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:l.encodeValuesOnly;if(void 0===n.format)n.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,n.format))throw new TypeError("Unknown format option provided.");var h,g,x=i.formatters[n.format];"function"==typeof n.filter?r=(g=n.filter)("",r):Array.isArray(n.filter)&&(h=g=n.filter);var _,w=[];if("object"!=typeof r||null===r)return"";_=n.arrayFormat in a?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var j=a[_];h||(h=Object.keys(r)),m&&h.sort(m);for(var O=0;O<h.length;++O){var k=h[O];u&&null===r[k]||(w=w.concat(s(r[k],k,j,f,u,p?d:null,g,m,y,v,x,b)))}var S=w.join(c),A=!0===n.addQueryPrefix?"?":"";return S.length>0?A+S:""}},Qyje:function(e,t,r){"use strict";var o=r("QSc6"),i=r("nmq7"),a=r("sxOR");e.exports={formats:a,parse:i,stringify:o}},RLXM:function(e,t,r){"use strict";var o=r("ddYq");r.n(o).a},ddYq:function(e,t,r){},nmq7:function(e,t,r){"use strict";var o=r("0jNN"),i=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:o.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},n=function(e,t,r){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,n=/(\[[^[\]]*])/.exec(o),l=n?o.slice(0,n.index):o,s=[];if(l){if(!r.plainObjects&&i.call(Object.prototype,l)&&!r.allowPrototypes)return;s.push(l)}for(var c=0;null!==(n=a.exec(o))&&c<r.depth;){if(c+=1,!r.plainObjects&&i.call(Object.prototype,n[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(n[1])}return n&&s.push("["+o.slice(n.index)+"]"),function(e,t,r){for(var o=t,i=e.length-1;i>=0;--i){var a,n=e[i];if("[]"===n)a=(a=[]).concat(o);else{a=r.plainObjects?Object.create(null):{};var l="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,s=parseInt(l,10);!isNaN(s)&&n!==l&&String(s)===l&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(a=[])[s]=o:a[l]=o}o=a}return o}(s,t,r)}};e.exports=function(e,t){var r=t?o.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||o.isRegExp(r.delimiter)?r.delimiter:a.delimiter,r.depth="number"==typeof r.depth?r.depth:a.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:a.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:a.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:a.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:a.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:a.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:a.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:a.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){for(var r={},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,n=t.parameterLimit===1/0?void 0:t.parameterLimit,l=o.split(t.delimiter,n),s=0;s<l.length;++s){var c,f,u=l[s],p=u.indexOf("]="),d=-1===p?u.indexOf("="):p+1;-1===d?(c=t.decoder(u,a.decoder),f=t.strictNullHandling?null:""):(c=t.decoder(u.slice(0,d),a.decoder),f=t.decoder(u.slice(d+1),a.decoder)),i.call(r,c)?r[c]=[].concat(r[c]).concat(f):r[c]=f}return r}(e,r):e,s=r.plainObjects?Object.create(null):{},c=Object.keys(l),f=0;f<c.length;++f){var u=c[f],p=n(u,l[u],r);s=o.merge(s,p,r)}return o.compact(s)}},sxOR:function(e,t,r){"use strict";var o=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return o.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},yzeq:function(e,t,r){"use strict";r.r(t);r("p46w");var o=r("t3Un"),i=r("Qyje"),a=r.n(i);var n=r("Q2AE"),l=r("6NYe"),s={name:"test",data:function(){return{patters:[],word:"",word_max:"",keyword:"",score:0,pid:"",items:[],putGeneralkeyVisible:!1,form:{sentiment:"",text:"",flag:0,action:void 0,category:void 0},diffKeywordVisible:!1,diffresult:{},difform:{text:"",text1:"",text2:""},show_admin:!1,updateState:!1,updateTimer:null}},created:function(){Object(l.a)("admin",n.a.getters.roles)&&(this.show_admin=!0),this.getPatterList()},methods:{reDispatchList:function(){var e=this;this.items=[],this.pid&&this.word?function(e){return Object(o.a)({url:"https://api.bbxxjs.com/api/ai/bsword",method:"get",params:e})}({pid:this.pid,text:this.word}).then(function(t){var r=t.data;console.log(r),200==r.code?(e.items=r.message.keywords,e.keyword=r.message.keyword,e.score=r.message.score_max,e.word_max=r.message.word_max,e.$notify({title:"成功",message:"处理成功",type:"success",duration:2e3})):e.$notify.error({title:"错误",message:r.msg,duration:2e3})}).catch(function(t){console.log("ERRRO"+t),e.$message.error("网络错误")}):this.$notify.error({title:"错误",message:"参数为空",duration:2e3})},getPatterList:function(){var e=this;Object(o.a)({url:"https://api.bbxxjs.com/api/ai/patter",method:"post"}).then(function(t){e.patters=t.data.message}).catch(function(t){console.log("ERROR"+t),e.$message.error("网络错误")})},updateKeyIndex:function(){var e=this;(function(e){return Object(o.a)({url:"https://api.bbxxjs.com/api/ai/reindex",method:"get",params:e})})().then(function(t){200==(t=t.data).code?(e.$message.success("索引可更新"),e.updateState=!0):201==t.code?(e.$message("被占用，请稍后再试"),e.updateState=!1):202==t.code?(e.$message.success("后台更新中..."),e.updateState=!1):e.$message.error("更新失败，请刷新重试")}).catch(function(t){console.log(t),e.$message.error("网络错误，请联系管理员")})},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?function(e){return Object(o.a)({url:"https://api.bbxxjs.com/api/ai/putkey",method:"POST",data:a.a.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}(t.form).then(function(e){t.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),t.form={sentiment:"",text:"",flag:0,action:void 0,category:void 0},t.putGeneralkeyVisible=!1}):t.$notify.error({title:"错误",message:"表单验证错误",duration:2e3})})},onSubmitDiff:function(){var e=this;(function(e){return Object(o.a)({url:"https://api.bbxxjs.com/api/ai/diffword",method:"get",params:e})})(this.difform).then(function(t){console.log(t),e.diffresult=t.data.message})}}},c=(r("RLXM"),r("KHd+")),f=Object(c.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{overflow:"auto","padding-bottom":"100px"}},[r("el-container",[r("el-button",{attrs:{type:"primary",disabled:e.updateState},on:{click:e.updateKeyIndex}},[e._v("更新关键词索引")]),e._v(" "),r("span",{staticStyle:{color:"#f00","font-size":"20px","margin-left":"20px",display:"inline-block"}},[e._v("关键词更改之后必须更新此文件")])],1),e._v(" "),r("el-container",[r("el-header",[r("div",{staticStyle:{"font-size":"2em"},attrs:{id:"dashboard"}},[r("span",[e._v("关键词")]),r("span",{staticStyle:{color:"#67C23A"}},[e._v(e._s(e.keyword))]),e._v(" "),r("span",[e._v("最高分关键词")]),r("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.word_max))]),e._v(" "),r("span",[e._v("最高分")]),r("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.score))])]),e._v(" "),e.show_admin?r("div",{staticStyle:{display:"inline-block"}},[r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){e.putGeneralkeyVisible=!0}}},[e._v("添加通用关键词")]),r("span",[e._v("用于干扰特殊关键字带来的跳转错误问题")])],1):e._e(),e._v(" "),r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){e.diffKeywordVisible=!0}}},[e._v("关键词对比")])],1)],1),e._v(" "),r("el-container",[r("el-main",[r("p",[e._v("评分标准")]),e._v(" "),r("div",{attrs:{id:"recording"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.items,"default-sort":{prop:"score",order:"descending"}}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"y_next",label:"肯定走向",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"n_next",label:"否定走向"}}),e._v(" "),r("el-table-column",{attrs:{prop:"keyword",label:"关键词"}}),e._v(" "),r("el-table-column",{attrs:{prop:"word",label:"文本"}}),e._v(" "),r("el-table-column",{attrs:{prop:"score",label:"分值"}})],1)],1)])],1),e._v(" "),r("el-container",{staticStyle:{position:"fixed",bottom:"0",height:"100px",right:"0"}},[r("el-footer",[r("div",{staticClass:"demonstration"},[e._v("关键词")]),e._v(" "),r("el-select",{attrs:{placeholder:"请选择话术"},model:{value:e.pid,callback:function(t){e.pid=t},expression:"pid"}},e._l(e.patters,function(e){return r("el-option",{key:e[0],attrs:{label:e[1],value:e[0]}})})),e._v(" "),r("el-input",{staticStyle:{width:"500px","margin-right":"20px"},attrs:{placeholder:"请输入关键词",clearable:""},model:{value:e.word,callback:function(t){e.word=t},expression:"word"}}),e._v(" "),r("el-button",{attrs:{type:"success",plain:""},on:{click:e.reDispatchList}},[e._v("确定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"提示",visible:e.putGeneralkeyVisible,width:"30%"},on:{"update:visible":function(t){e.putGeneralkeyVisible=t}}},[r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"文本"}},[r("el-input",{model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"意图"}},[r("el-select",{attrs:{placeholder:"请选择意图"},model:{value:e.form.sentiment,callback:function(t){e.$set(e.form,"sentiment",t)},expression:"form.sentiment"}},[r("el-option",{attrs:{label:"消极",value:"0"}}),e._v(" "),r("el-option",{attrs:{label:"中性",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"积极",value:"2"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否强制匹配"}},[r("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.form.flag,callback:function(t){e.$set(e.form,"flag",t)},expression:"form.flag"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"大类意图"}},[r("el-select",{attrs:{placeholder:"请选择大类意图"},model:{value:e.form.action,callback:function(t){e.$set(e.form,"action",t)},expression:"form.action"}},[r("el-option",{attrs:{label:"结束",value:"0"}}),e._v(" "),r("el-option",{attrs:{label:"通过",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"重复",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"继续",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"忙碌",value:"4"}})],1)],1),e._v(" "),3==e.form.action?r("el-form-item",{attrs:{label:"小类意图"}},[r("el-select",{attrs:{placeholder:"请选择小类意图"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[r("el-option",{attrs:{label:"正向",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"负向",value:"3"}})],1)],1):e._e(),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("立即创建")]),e._v(" "),r("el-button",{on:{click:function(t){e.putGeneralkeyVisible=!1}}},[e._v("取消")])],1)],1)],1)]),e._v(" "),r("el-dialog",{attrs:{title:"提示",visible:e.diffKeywordVisible,width:"30%"},on:{"update:visible":function(t){e.diffKeywordVisible=t}}},[r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-form",{ref:"difform",attrs:{model:e.difform,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"原文本"}},[r("el-input",{model:{value:e.difform.text,callback:function(t){e.$set(e.difform,"text",t)},expression:"difform.text"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"关键词文本1"}},[r("el-input",{model:{value:e.difform.text1,callback:function(t){e.$set(e.difform,"text1",t)},expression:"difform.text1"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"关键词文本2"}},[r("el-input",{model:{value:e.difform.text2,callback:function(t){e.$set(e.difform,"text2",t)},expression:"difform.text2"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitDiff}},[e._v("对比")]),e._v(" "),r("el-button",{on:{click:function(t){e.diffKeywordVisible=!1}}},[e._v("关闭")])],1)],1)],1),e._v(" "),r("span",[e._v("结果")]),e._v(" "),e._l(e.diffresult,function(t,o){return r("span",{staticStyle:{display:"block"}},[e._v(e._s(o)+":"+e._s(t))])})],2)],1)},[],!1,null,"925d2924",null);f.options.__file="index.vue";t.default=f.exports}}]);